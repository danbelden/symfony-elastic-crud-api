function handleLogin(){var e=[],i=window.swaggerUi.api.authSchemes||window.swaggerUi.api.securityDefinitions;if(i){var o,a=i;for(o in a){var n=a[o];if("oauth2"===n.type&&n.scopes){var p;if(Array.isArray(n.scopes)){var t;for(t=0;t<n.scopes.length;t++)e.push(n.scopes[t])}else for(p in n.scopes)e.push({scope:p,description:n.scopes[p],OAuthSchemeKey:o})}}}for(window.swaggerUi.api&&window.swaggerUi.api.info&&(appName=window.swaggerUi.api.info.title),$(".api-popup-dialog").remove(),popupDialog=$(['<div class="api-popup-dialog">','<div class="api-popup-title">Select OAuth2.0 Scopes</div>','<div class="api-popup-content">',"<p>Scopes are used to grant an application different levels of access to data on behalf of the end user. Each API may declare one or more scopes.",'<a href="#">Learn how to use</a>',"</p>","<p><strong>"+appName+"</strong> API requires the following scopes. Select which ones you want to grant to Swagger UI.</p>",'<ul class="api-popup-scopes">',"</ul>",'<p class="error-msg"></p>','<div class="api-popup-actions"><button class="api-popup-authbtn api-button green" type="button">Authorize</button><button class="api-popup-cancel api-button gray" type="button">Cancel</button></div>',"</div>","</div>"].join("")),$(document.body).append(popupDialog),popup=popupDialog.find("ul.api-popup-scopes").empty(),t=0;t<e.length;t++)p=e[t],str='<li><input type="checkbox" id="scope_'+t+'" scope="'+p.scope+'"" oauthtype="'+p.OAuthSchemeKey+'"/><label for="scope_'+t+'">'+p.scope,p.description&&($.map(i,function(e,i){return i}).length>1?str+='<br/><span class="api-scope-desc">'+p.description+" ("+p.OAuthSchemeKey+")</span>":str+='<br/><span class="api-scope-desc">'+p.description+"</span>"),str+="</label></li>",popup.append(str);var r=$(window),c=r.width(),s=r.height(),l=r.scrollTop(),d=popupDialog.outerWidth(),u=popupDialog.outerHeight(),h=(s-u)/2+l,g=(c-d)/2;popupDialog.css({top:(0>h?0:h)+"px",left:(0>g?0:g)+"px"}),popupDialog.find("button.api-popup-cancel").click(function(){popupMask.hide(),popupDialog.hide(),popupDialog.empty(),popupDialog=[]}),$("button.api-popup-authbtn").unbind(),popupDialog.find("button.api-popup-authbtn").click(function(){popupMask.hide(),popupDialog.hide();var e,i=window.swaggerUi.api.authSchemes,o=window.location,a=location.pathname.substring(0,location.pathname.lastIndexOf("/")),n=o.protocol+"//"+o.host+a+"/o2c.html",p=window.oAuthRedirectUrl||n,t=null,r=[],c=popup.find("input:checked"),s=[];for(k=0;k<c.length;k++){var l=$(c[k]).attr("scope");-1===r.indexOf(l)&&r.push(l);var d=$(c[k]).attr("oauthtype");-1===s.indexOf(d)&&s.push(d)}window.enabledScopes=r;for(var u in i)if(i.hasOwnProperty(u)&&-1!=s.indexOf(u)){var h=i[u].flow;if("oauth2"!==i[u].type||!h||"implicit"!==h&&"accessCode"!==h){if("oauth2"===i[u].type&&h&&"application"===h){var g=i[u];return window.swaggerUi.tokenName=g.tokenName||"access_token",void clientCredentialsFlow(r,g.tokenUrl,u)}if(i[u].grantTypes){var c=i[u].grantTypes;for(var w in c)if(c.hasOwnProperty(w)&&"implicit"===w){var g=c[w];g.loginEndpoint.url;t=g.loginEndpoint.url+"?response_type=token",window.swaggerUi.tokenName=g.tokenName}else if(c.hasOwnProperty(w)&&"accessCode"===w){var g=c[w];g.tokenRequestEndpoint.url;t=g.tokenRequestEndpoint.url+"?response_type=code",window.swaggerUi.tokenName=g.tokenName}}}else{var g=i[u];t=g.authorizationUrl+"?response_type="+("implicit"===h?"token":"code"),window.swaggerUi.tokenName=g.tokenName||"access_token",window.swaggerUi.tokenUrl="accessCode"===h?g.tokenUrl:null,e=u}}redirect_uri=p,t+="&redirect_uri="+encodeURIComponent(p),t+="&realm="+encodeURIComponent(realm),t+="&client_id="+encodeURIComponent(clientId),t+="&scope="+encodeURIComponent(r.join(scopeSeparator)),t+="&state="+encodeURIComponent(e);for(var u in additionalQueryStringParams)t+="&"+u+"="+encodeURIComponent(additionalQueryStringParams[u]);window.open(t)}),popupMask.show(),popupDialog.show()}function handleLogout(){for(key in window.swaggerUi.api.clientAuthorizations.authz)window.swaggerUi.api.clientAuthorizations.remove(key);window.enabledScopes=null,$(".api-ic.ic-on").addClass("ic-off"),$(".api-ic.ic-on").removeClass("ic-on"),$(".api-ic.ic-warning").addClass("ic-error"),$(".api-ic.ic-warning").removeClass("ic-warning")}function initOAuth(e){var i=e||{},o=[];return appName=i.appName||o.push("missing appName"),popupMask=i.popupMask||$("#api-common-mask"),popupDialog=i.popupDialog||$(".api-popup-dialog"),clientId=i.clientId||o.push("missing client id"),clientSecret=i.clientSecret||null,realm=i.realm||o.push("missing realm"),scopeSeparator=i.scopeSeparator||" ",additionalQueryStringParams=i.additionalQueryStringParams||{},o.length>0?void log("auth unable initialize oauth: "+o):($("pre code").each(function(e,i){hljs.highlightBlock(i)}),$(".api-ic").unbind(),void $(".api-ic").click(function(e){$(e.target).hasClass("ic-off")?handleLogin():handleLogout()}))}function clientCredentialsFlow(e,i,o){var a={client_id:clientId,client_secret:clientSecret,scope:e.join(" "),grant_type:"client_credentials"};$.ajax({url:i,type:"POST",data:a,success:function(e,i,a){onOAuthComplete(e,o)},error:function(e,i,o){onOAuthComplete("")}})}var appName,popupMask,popupDialog,clientId,realm,redirect_uri,clientSecret,scopeSeparator,additionalQueryStringParams;window.processOAuthCode=function(e){var i=e.state,o={client_id:clientId,code:e.code,grant_type:"authorization_code",redirect_uri:redirect_uri};clientSecret&&(o.client_secret=clientSecret),$.ajax({url:window.swaggerUi.tokenUrl,type:"POST",data:o,success:function(e,o,a){onOAuthComplete(e,i)},error:function(e,i,o){onOAuthComplete("")}})},window.onOAuthComplete=function(e,i){if(e)if(e.error){var o=$("input[type=checkbox],.secured");o.each(function(e){o[e].checked=!1}),alert(e.error)}else{var a=e[window.swaggerUi.tokenName];if(i||(i=e.state),a){var n=null;$.each($(".auth .api-ic .api_information_panel"),function(e,i){var o=i;if(o&&o.childNodes){var a=[];$.each(o.childNodes,function(e,i){var o=i.innerHTML;o&&a.push(o)});for(var p=[],t=0;t<a.length;t++){var r=a[t];window.enabledScopes&&-1==window.enabledScopes.indexOf(r)&&p.push(r)}p.length>0?(n=i.parentNode.parentNode,$(n.parentNode).find(".api-ic.ic-on").addClass("ic-off"),$(n.parentNode).find(".api-ic.ic-on").removeClass("ic-on"),$(n).find(".api-ic").addClass("ic-warning"),$(n).find(".api-ic").removeClass("ic-error")):(n=i.parentNode.parentNode,$(n.parentNode).find(".api-ic.ic-off").addClass("ic-on"),$(n.parentNode).find(".api-ic.ic-off").removeClass("ic-off"),$(n).find(".api-ic").addClass("ic-info"),$(n).find(".api-ic").removeClass("ic-warning"),$(n).find(".api-ic").removeClass("ic-error"))}}),window.swaggerUi.api.clientAuthorizations.add(i,new SwaggerClient.ApiKeyAuthorization("Authorization","Bearer "+a,"header"))}}};